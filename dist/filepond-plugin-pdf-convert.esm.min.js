/*!
 * FilePondPluginPdfConvert 1.0.0
 * Licensed under ISC, https://opensource.org/licenses/ISC/
 * Please visit undefined for details.
 */
/* eslint-disable */

const t=(t,e)=>{const n=[],o=[];let a=0,i=0,r=1;return new Promise(((s,d)=>{try{const d=new FileReader;d.onload=async function(){const d=new Uint8Array(this.result),c=await pdfjsLib.getDocument(d).promise;!async function d(){const h=await c.getPage(r),u=h.getViewport({scale:1.5}),p=document.createElement("canvas"),w=p.getContext("2d"),l={canvasContext:w,viewport:u};p.height=u.height,p.width=u.width,await h.render(l).promise,n.push(w.getImageData(0,0,p.width,p.height)),o.push(i),i+=p.height,a<p.width&&(a=p.width);if(r<c.numPages)r++,d();else{const r=function(){const t=document.createElement("canvas"),e=t.getContext("2d");t.width=a,t.height=i;for(let t=0;t<n.length;t++)e.putImageData(n[t],0,o[t]);return t}(),d=atob(r.toDataURL(e).split(",")[1]),c=[];for(let t=0;t<d.length;t++)c.push(d.charCodeAt(t));const h=new Blob([new Uint8Array(c)],{type:e});s(new File([h],t.name,{type:e}))}}()},d.readAsArrayBuffer(t)}catch(t){d(t)}}))},e=({addFilter:e,utils:n})=>{const{Type:o}=n;return e("LOAD_FILE",((e,{query:n})=>new Promise(((o,a)=>{(t=>/pdf$/.test(t.type))(e)?t(e,n("GET_PDF_CONVERT_TYPE")).then((function(t){o(t)})).catch((()=>o(e))):o(e)})))),{options:{pdfConvertType:["image/png",o.STRING]}}};"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:e}));export default e;
